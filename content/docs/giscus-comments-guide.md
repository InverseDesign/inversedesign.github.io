---
title: "Giscus è¯„è®ºç³»ç»Ÿé…ç½®æŒ‡å—"
date: 2024-01-15
description: "è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨ Hugo ç½‘ç«™ä¸­é…ç½®å’Œä½¿ç”¨ Giscus è¯„è®ºç³»ç»Ÿ"
tags:
  - Hugo
  - Giscus
  - è¯„è®ºç³»ç»Ÿ
  - GitHub Discussions
  - é…ç½®æŒ‡å—
categories:
  - åŠŸèƒ½æŒ‡å—
---

{{< callout type="info" emoji="ğŸ’¬" >}}
**Giscus** æ˜¯ä¸€ä¸ªåŸºäº GitHub Discussions çš„è¯„è®ºç³»ç»Ÿï¼Œä½¿ç”¨ GitHub è´¦æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œæ— éœ€é¢å¤–çš„æ•°æ®åº“æˆ–æœåŠ¡å™¨ã€‚
{{< /callout >}}

# Giscus è¯„è®ºç³»ç»Ÿé…ç½®æŒ‡å—

## ä»€ä¹ˆæ˜¯ Giscusï¼Ÿ

Giscus æ˜¯ä¸€ä¸ªåŸºäº GitHub Discussions çš„è¯„è®ºç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### âœ¨ æ ¸å¿ƒä¼˜åŠ¿
- **æ— éœ€æ•°æ®åº“**: ä½¿ç”¨ GitHub Discussions å­˜å‚¨è¯„è®º
- **GitHub èº«ä»½éªŒè¯**: ç”¨æˆ·ä½¿ç”¨ GitHub è´¦æˆ·ç™»å½•
- **å®æ—¶æ›´æ–°**: æ”¯æŒå®æ—¶è¯„è®ºæ›´æ–°
- **ä¸»é¢˜æ”¯æŒ**: æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- **å¤šè¯­è¨€**: æ”¯æŒå¤šç§è¯­è¨€ç•Œé¢
- **å…è´¹ä½¿ç”¨**: å®Œå…¨å…è´¹ï¼Œæ— éœ€ä»˜è´¹æœåŠ¡

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§
- **åŸºäº GitHub API**: ä½¿ç”¨ GitHub GraphQL API
- **å“åº”å¼è®¾è®¡**: é€‚é…å„ç§è®¾å¤‡å±å¹•
- **SEO å‹å¥½**: è¯„è®ºå†…å®¹å¯ä»¥è¢«æœç´¢å¼•æ“ç´¢å¼•
- **éšç§ä¿æŠ¤**: ä¸æ”¶é›†ç”¨æˆ·ä¸ªäººä¿¡æ¯
- **å¼€æºé¡¹ç›®**: ä»£ç å®Œå…¨å¼€æº

## å‰ç½®æ¡ä»¶

### 1. GitHub ä»“åº“è¦æ±‚
- ä»“åº“å¿…é¡»æ˜¯**å…¬å¼€çš„**ï¼ˆPublicï¼‰
- ä»“åº“å¿…é¡»**å¯ç”¨ Discussions åŠŸèƒ½**
- ä»“åº“å¿…é¡»**å®‰è£… Giscus åº”ç”¨**

### 2. è·å–å¿…è¦ä¿¡æ¯
åœ¨é…ç½®è¿‡ç¨‹ä¸­ï¼Œæ‚¨éœ€è¦è·å–ä»¥ä¸‹ä¿¡æ¯ï¼š
- **ä»“åº“åç§°**: `inversedesign/inversedesign.github.io`
- **ä»“åº“ ID**: `R_kgDOPjsjDA`
- **åˆ†ç±»åç§°**: `Announcements`
- **åˆ†ç±» ID**: `DIC_kwDOPjsjDM4Cuj3Q`

## é…ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¯ç”¨ GitHub Discussions

1. **è®¿é—®æ‚¨çš„ GitHub ä»“åº“**
   ```
   https://github.com/inversedesign/inversedesign.github.io
   ```

2. **å¯ç”¨ Discussions åŠŸèƒ½**
   - ç‚¹å‡»ä»“åº“é¡¶éƒ¨çš„ "Settings" æ ‡ç­¾
   - åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° "Features"
   - å‹¾é€‰ "Discussions" é€‰é¡¹
   - ç‚¹å‡» "Save changes"

3. **åˆ›å»ºåˆ†ç±»**
   - ç‚¹å‡»ä»“åº“é¡¶éƒ¨çš„ "Discussions" æ ‡ç­¾
   - ç‚¹å‡» "New discussion"
   - åœ¨å³ä¾§é€‰æ‹© "Announcements" åˆ†ç±»
   - å¦‚æœæ²¡æœ‰è¯¥åˆ†ç±»ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª

### ç¬¬äºŒæ­¥ï¼šå®‰è£… Giscus åº”ç”¨

1. **è®¿é—® Giscus åº”ç”¨é¡µé¢**
   ```
   https://github.com/apps/giscus
   ```

2. **å®‰è£…åº”ç”¨**
   - ç‚¹å‡» "Install" æŒ‰é’®
   - é€‰æ‹©æ‚¨çš„ä»“åº“ `inversedesign/inversedesign.github.io`
   - ç‚¹å‡» "Install" ç¡®è®¤å®‰è£…

3. **é…ç½®åº”ç”¨æƒé™**
   - ç¡®ä¿åº”ç”¨æœ‰è®¿é—® Discussions çš„æƒé™
   - ç¡®ä¿åº”ç”¨æœ‰è¯»å–ä»“åº“å…ƒæ•°æ®çš„æƒé™

### ç¬¬ä¸‰æ­¥ï¼šè·å–é…ç½®ä¿¡æ¯

1. **è·å–ä»“åº“ ID**
   ```bash
   # ä½¿ç”¨ GitHub API è·å–ä»“åº“ ID
   curl -H "Authorization: token YOUR_GITHUB_TOKEN" \
        https://api.github.com/repos/inversedesign/inversedesign.github.io
   ```

2. **è·å–åˆ†ç±» ID**
   ```bash
   # ä½¿ç”¨ GitHub GraphQL API è·å–åˆ†ç±» ID
   curl -X POST \
        -H "Authorization: token YOUR_GITHUB_TOKEN" \
        -H "Content-Type: application/json" \
        -d '{"query":"query{repository(owner:\"inversedesign\",name:\"inversedesign.github.io\"){discussionCategories(first:10){nodes{id,name}}}}"}' \
        https://api.github.com/graphql
   ```

### ç¬¬å››æ­¥ï¼šåˆ›å»º Giscus çŸ­ä»£ç 

åˆ›å»ºæ–‡ä»¶ `layouts/shortcodes/giscus.html`ï¼š

```html
{{/* Giscus è¯„è®ºç³»ç»ŸçŸ­ä»£ç  */}}
<div class="giscus-container">
  <script src="https://giscus.app/client.js"
          data-repo="inversedesign/inversedesign.github.io"
          data-repo-id="R_kgDOPjsjDA"
          data-category="Announcements"
          data-category-id="DIC_kwDOPjsjDM4Cuj3Q"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="top"
          data-theme="preferred_color_scheme"
          data-lang="zh-CN"
          data-loading="lazy"
          crossorigin="anonymous"
          async>
  </script>
</div>

<style>
.giscus-container {
  margin: 2rem 0;
  padding: 1rem;
  border: 1px solid #e1e5e9;
  border-radius: 8px;
  background: #fafbfc;
}

/* æš—è‰²ä¸»é¢˜é€‚é… */
@media (prefers-color-scheme: dark) {
  .giscus-container {
    background: #0d1117;
    border-color: #30363d;
  }
}
</style>
```

### ç¬¬äº”æ­¥ï¼šåœ¨ Hugo é…ç½®ä¸­æ·»åŠ å‚æ•°

åœ¨ `hugo.yaml` ä¸­æ·»åŠ  Giscus é…ç½®ï¼š

```yaml
params:
  # è¯„è®ºç³»ç»Ÿé…ç½®
  comments:
    enable: true
    type: giscus  # ä½¿ç”¨ giscus è¯„è®ºç³»ç»Ÿ
  
  # Giscus é…ç½®
  giscus:
    repo: "inversedesign/inversedesign.github.io"
    repoId: "R_kgDOPjsjDA"
    category: "Announcements"
    categoryId: "DIC_kwDOPjsjDM4Cuj3Q"
    mapping: "pathname"
    strict: "0"
    reactionsEnabled: "1"
    emitMetadata: "0"
    inputPosition: "top"
    theme: "preferred_color_scheme"
    lang: "zh-CN"
    loading: "lazy"
```

### ç¬¬å…­æ­¥ï¼šåœ¨æ–‡ç« ä¸­ä½¿ç”¨

åœ¨æ‚¨çš„ Markdown æ–‡ç« ä¸­æ·»åŠ ï¼š

{{< giscus >}}

## é…ç½®å‚æ•°è¯¦è§£

### åŸºç¡€å‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|----|----|
| `data-repo` | `inversedesign/inversedesign.github.io` | GitHub ä»“åº“åç§° |
| `data-repo-id` | `R_kgDOPjsjDA` | GitHub ä»“åº“ ID |
| `data-category` | `Announcements` | Discussions åˆ†ç±»åç§° |
| `data-category-id` | `DIC_kwDOPjsjDM4Cuj3Q` | Discussions åˆ†ç±» ID |

### æ˜ å°„å‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|----|----|
| `data-mapping` | `pathname` | é¡µé¢æ ‡è¯†æ–¹å¼ |
| `data-strict` | `0` | ä¸¥æ ¼æ¨¡å¼ï¼ˆ0=å…³é—­ï¼Œ1=å¼€å¯ï¼‰ |
| `data-term` | - | æœç´¢è¯ï¼ˆå¯é€‰ï¼‰ |

**æ˜ å°„æ–¹å¼é€‰é¡¹ï¼š**
- `pathname`: ä½¿ç”¨é¡µé¢è·¯å¾„ï¼ˆæ¨èï¼‰
- `url`: ä½¿ç”¨å®Œæ•´ URL
- `title`: ä½¿ç”¨é¡µé¢æ ‡é¢˜
- `og:title`: ä½¿ç”¨ Open Graph æ ‡é¢˜
- `specific`: ä½¿ç”¨ç‰¹å®šæ ‡è¯†ç¬¦
- `number`: ä½¿ç”¨æ•°å­—æ ‡è¯†ç¬¦

### æ˜¾ç¤ºå‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|----|----|
| `data-reactions-enabled` | `1` | å¯ç”¨ååº”åŠŸèƒ½ |
| `data-emit-metadata` | `0` | å‘é€å…ƒæ•°æ® |
| `data-input-position` | `top` | è¾“å…¥æ¡†ä½ç½® |
| `data-theme` | `preferred_color_scheme` | ä¸»é¢˜è®¾ç½® |
| `data-lang` | `zh-CN` | ç•Œé¢è¯­è¨€ |
| `data-loading` | `lazy` | åŠ è½½æ–¹å¼ |

**è¾“å…¥ä½ç½®é€‰é¡¹ï¼š**
- `top`: è¾“å…¥æ¡†åœ¨è¯„è®ºåˆ—è¡¨ä¸Šæ–¹
- `bottom`: è¾“å…¥æ¡†åœ¨è¯„è®ºåˆ—è¡¨ä¸‹æ–¹

**ä¸»é¢˜é€‰é¡¹ï¼š**
- `light`: æµ…è‰²ä¸»é¢˜
- `dark`: æ·±è‰²ä¸»é¢˜
- `preferred_color_scheme`: è·Ÿéšç³»ç»Ÿä¸»é¢˜
- `dark_dimmed`: æš—è‰²ä¸»é¢˜ï¼ˆGitHub é£æ ¼ï¼‰
- `transparent_dark`: é€æ˜æš—è‰²ä¸»é¢˜

**è¯­è¨€é€‰é¡¹ï¼š**
- `zh-CN`: ç®€ä½“ä¸­æ–‡
- `en`: è‹±æ–‡
- `ja`: æ—¥æ–‡
- `ko`: éŸ©æ–‡
- `fr`: æ³•æ–‡
- `de`: å¾·æ–‡

## é«˜çº§é…ç½®

### 1. è‡ªå®šä¹‰ä¸»é¢˜

åˆ›å»ºè‡ªå®šä¹‰ CSS æ¥ç¾åŒ– Giscus ç•Œé¢ï¼š

```css
/* åœ¨ assets/css/custom.css ä¸­æ·»åŠ  */
.giscus-container {
  margin: 2rem 0;
  padding: 1.5rem;
  border-radius: 12px;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* æš—è‰²ä¸»é¢˜ */
@media (prefers-color-scheme: dark) {
  .giscus-container {
    background: linear-gradient(135deg, #0d1117 0%, #161b22 100%);
    border: 1px solid #30363d;
  }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .giscus-container {
    margin: 1rem 0;
    padding: 1rem;
  }
}
```

### 2. æ¡ä»¶æ˜¾ç¤º

åªåœ¨ç‰¹å®šé¡µé¢æ˜¾ç¤ºè¯„è®ºï¼š

```html
{{/* layouts/shortcodes/giscus.html */}}
{{ if and .Site.Params.comments.enable (eq .Site.Params.comments.type "giscus") }}
  {{ if not .Params.disableComments }}
    <div class="giscus-container">
      <script src="https://giscus.app/client.js"
              data-repo="{{ .Site.Params.giscus.repo }}"
              data-repo-id="{{ .Site.Params.giscus.repoId }}"
              data-category="{{ .Site.Params.giscus.category }}"
              data-category-id="{{ .Site.Params.giscus.categoryId }}"
              data-mapping="{{ .Site.Params.giscus.mapping }}"
              data-strict="{{ .Site.Params.giscus.strict }}"
              data-reactions-enabled="{{ .Site.Params.giscus.reactionsEnabled }}"
              data-emit-metadata="{{ .Site.Params.giscus.emitMetadata }}"
              data-input-position="{{ .Site.Params.giscus.inputPosition }}"
              data-theme="{{ .Site.Params.giscus.theme }}"
              data-lang="{{ .Site.Params.giscus.lang }}"
              data-loading="{{ .Site.Params.giscus.loading }}"
              crossorigin="anonymous"
              async>
      </script>
    </div>
  {{ end }}
{{ end }}
```

### 3. å¤šè¯­è¨€æ”¯æŒ

ä¸ºä¸åŒè¯­è¨€é…ç½®ä¸åŒçš„ Giscus è®¾ç½®ï¼š

```yaml
# hugo.yaml
languages:
  zh-cn:
    params:
      giscus:
        lang: "zh-CN"
  en:
    params:
      giscus:
        lang: "en"
```

### 4. é”™è¯¯å¤„ç†

æ·»åŠ é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€ï¼š

```html
{{/* layouts/shortcodes/giscus.html */}}
<div class="giscus-container">
  <div id="giscus-loading" class="giscus-loading">
    <div class="loading-spinner"></div>
    <p>æ­£åœ¨åŠ è½½è¯„è®º...</p>
  </div>
  
  <script src="https://giscus.app/client.js"
          data-repo="inversedesign/inversedesign.github.io"
          data-repo-id="R_kgDOPjsjDA"
          data-category="Announcements"
          data-category-id="DIC_kwDOPjsjDM4Cuj3Q"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="top"
          data-theme="preferred_color_scheme"
          data-lang="zh-CN"
          data-loading="lazy"
          crossorigin="anonymous"
          async>
  </script>
  
  <script>
    // ç›‘å¬ Giscus åŠ è½½å®Œæˆ
    window.addEventListener('load', function() {
      const giscusFrame = document.querySelector('iframe[src*="giscus.app"]');
      if (giscusFrame) {
        giscusFrame.addEventListener('load', function() {
          document.getElementById('giscus-loading').style.display = 'none';
        });
      }
    });
  </script>
</div>

<style>
.giscus-loading {
  text-align: center;
  padding: 2rem;
  color: #666;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. è¯„è®ºä¸æ˜¾ç¤º
**å¯èƒ½åŸå› ï¼š**
- GitHub Discussions æœªå¯ç”¨
- Giscus åº”ç”¨æœªå®‰è£…
- ä»“åº“ä¸æ˜¯å…¬å¼€çš„
- é…ç½®å‚æ•°é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ä»“åº“è®¾ç½®ä¸­çš„ Discussions åŠŸèƒ½
2. ç¡®è®¤ Giscus åº”ç”¨å·²å®‰è£…
3. éªŒè¯ä»“åº“ä¸ºå…¬å¼€çŠ¶æ€
4. æ£€æŸ¥é…ç½®å‚æ•°æ˜¯å¦æ­£ç¡®

#### 2. èº«ä»½éªŒè¯å¤±è´¥
**å¯èƒ½åŸå› ï¼š**
- GitHub è´¦æˆ·æœªæˆæƒ
- ç½‘ç»œè¿æ¥é—®é¢˜
- æµè§ˆå™¨é˜»æ­¢äº†ç¬¬ä¸‰æ–¹ Cookie

**è§£å†³æ–¹æ³•ï¼š**
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’Œ Cookie
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. å…è®¸ç¬¬ä¸‰æ–¹ Cookie
4. é‡æ–°æˆæƒ GitHub è´¦æˆ·

#### 3. ä¸»é¢˜ä¸åŒ¹é…
**å¯èƒ½åŸå› ï¼š**
- ä¸»é¢˜å‚æ•°è®¾ç½®é”™è¯¯
- CSS æ ·å¼å†²çª

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ `data-theme` å‚æ•°
2. è°ƒæ•´è‡ªå®šä¹‰ CSS æ ·å¼
3. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è°ƒè¯•

### è°ƒè¯•æŠ€å·§

#### 1. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æ£€æŸ¥
console.log('Giscus é…ç½®:', {
  repo: 'inversedesign/inversedesign.github.io',
  repoId: 'R_kgDOPjsjDA',
  category: 'Announcements',
  categoryId: 'DIC_kwDOPjsjDM4Cuj3Q'
});
```

#### 2. éªŒè¯ GitHub API
```bash
# éªŒè¯ä»“åº“ä¿¡æ¯
curl https://api.github.com/repos/inversedesign/inversedesign.github.io

# éªŒè¯ Discussions åˆ†ç±»
curl -H "Authorization: token YOUR_TOKEN" \
     https://api.github.com/graphql \
     -d '{"query":"query{repository(owner:\"inversedesign\",name:\"inversedesign.github.io\"){discussionCategories(first:10){nodes{id,name}}}}"}'
```

#### 3. æµ‹è¯• Giscus é…ç½®
è®¿é—® [Giscus é…ç½®é¡µé¢](https://giscus.app/) æ¥æµ‹è¯•æ‚¨çš„é…ç½®æ˜¯å¦æ­£ç¡®ã€‚

## æœ€ä½³å®è·µ

### 1. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ `data-loading="lazy"` å»¶è¿ŸåŠ è½½
- åœ¨éœ€è¦æ—¶æ‰æ˜¾ç¤ºè¯„è®ºç»„ä»¶
- é¿å…åœ¨é¦–é¡µç­‰åˆ—è¡¨é¡µé¢æ˜¾ç¤ºè¯„è®º

### 2. ç”¨æˆ·ä½“éªŒ
- é€‰æ‹©åˆé€‚çš„ä¸»é¢˜å’Œè¯­è¨€
- æä¾›æ¸…æ™°çš„åŠ è½½æç¤º
- å¤„ç†ç½‘ç»œé”™è¯¯å’Œå¼‚å¸¸æƒ…å†µ

### 3. ç»´æŠ¤ç®¡ç†
- å®šæœŸæ£€æŸ¥ GitHub Discussions
- ç›‘æ§è¯„è®ºè´¨é‡å’Œåƒåœ¾è¯„è®º
- åŠæ—¶å›å¤ç”¨æˆ·è¯„è®º

### 4. SEO ä¼˜åŒ–
- ç¡®ä¿è¯„è®ºå†…å®¹å¯ä»¥è¢«æœç´¢å¼•æ“ç´¢å¼•
- ä½¿ç”¨åˆé€‚çš„é¡µé¢æ ‡è¯†æ–¹å¼
- é¿å…é‡å¤çš„è¯„è®ºå†…å®¹

## æ€»ç»“

Giscus æ˜¯ä¸€ä¸ªä¼˜ç§€çš„è¯„è®ºç³»ç»Ÿé€‰æ‹©ï¼Œç‰¹åˆ«é€‚åˆæŠ€æœ¯åšå®¢å’Œä¸ªäººç½‘ç«™ã€‚é€šè¿‡æœ¬æŒ‡å—ï¼Œæ‚¨åº”è¯¥èƒ½å¤ŸæˆåŠŸé…ç½®å’Œä½¿ç”¨ Giscus è¯„è®ºç³»ç»Ÿã€‚

### é…ç½®æ£€æŸ¥æ¸…å•
- [ ] GitHub Discussions å·²å¯ç”¨
- [ ] Giscus åº”ç”¨å·²å®‰è£…
- [ ] ä»“åº“ä¸ºå…¬å¼€çŠ¶æ€
- [ ] é…ç½®å‚æ•°æ­£ç¡®
- [ ] çŸ­ä»£ç å·²åˆ›å»º
- [ ] åœ¨æ–‡ç« ä¸­æµ‹è¯•ä½¿ç”¨

å¦‚æœæ‚¨åœ¨é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†æˆ–è®¿é—® [Giscus å®˜æ–¹æ–‡æ¡£](https://github.com/giscus/giscus) è·å–æ›´å¤šå¸®åŠ©ã€‚
